<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="pl.altkom.shop.mrepo.ProductRepo" >
<cache size="1000" >

</cache>
    <select id="findAll" resultType="pl.altkom.shop.model.Product" >
    <if test="_databaseId == 'MySQL'">
        select * from PRODUCT
    </if>
    </select>
     <select id="findById" resultType="pl.altkom.shop.model.Product" >
        select * from PRODUCT WHERE id = #{id}
    </select>
    <insert id="save" >
     <selectKey keyProperty="id" order="BEFORE" resultType="long">
     	<if test="_databaseId == 'MySQL'">
      		SELECT MAX(ID)+1 FROM PRODUCT
    	</if>
     	<if test="_databaseId == 'oracle'">
      		select seq_users.nextval from dual
    	</if>
    	<if test="_databaseId == 'db2'">
     		 select nextval for seq_users from sysibm.sysdummy1"
    	</if>
     </selectKey>
     	insert into PRODUCT(id,name,price,quantity) values (#{id}, #{name},#{price},#{quantity})
    </insert>
</mapper>